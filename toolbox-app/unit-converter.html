<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>単位変換ツール | ツールボックス</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Roboto+Slab&display=swap');
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0;
    font-family: 'Roboto Slab', serif;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: #eef1f7;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 12px;
  }
  #app {
    background: #1e1e2f;
    border-radius: 15px;
    width: 340px;
    max-width: 95vw;
    box-shadow: 0 8px 16px rgba(0,0,0,0.4);
    padding: 20px;
  }
  header {
    text-align: center;
    font-size: 1.6rem;
    font-weight: 700;
    margin-bottom: 16px;
    user-select: none;
  }
  label {
    display: block;
    margin-bottom: 8px;
    font-weight: 700;
    color: #ccd1ff;
  }
  select, input {
    width: 100%;
    font-size: 1rem;
    padding: 8px 10px;
    border-radius: 10px;
    border: none;
    margin-bottom: 20px;
    background: #3a3a67;
    color: #eef1f7;
    outline: none;
    box-shadow: inset 2px 2px 5px #273065, inset -2px -2px 5px #4555a4;
  }
  button {
    width: 100%;
    background: #7d91f6;
    border: none;
    color: #1e1e2f;
    font-weight: 700;
    padding: 12px 0;
    font-size: 1.2rem;
    border-radius: 12px;
    cursor: pointer;
    user-select: none;
    box-shadow: 0 3px 6px rgba(125,145,246,0.7);
    transition: background 0.3s ease;
    margin-top: 10px;
  }
  button:active {
    background: #5a68bf;
  }
  #result {
    margin-top: 20px;
    background: #2c2c48;
    padding: 12px;
    border-radius: 12px;
    font-size: 1.1rem;
    font-weight: 700;
    color: #ccd1ff;
    text-align: center;
    user-select: none;
    min-height: 2em;
  }
  @media (max-width: 380px), (max-height: 600px) {
    #app {
      width: 100vw;
      height: 100vh;
      border-radius: 0;
      box-sizing: border-box;
      padding: 14px 12px;
    }
    button {
      font-size: 1rem;
      padding: 10px 0;
    }
  }
</style>
</head>
<body>
  <div id="app" role="application" aria-label="単位変換ツール">
    <header>単位変換ツール</header>
    <label for="categorySelect">変換カテゴリ</label>
    <select id="categorySelect" aria-label="単位変換カテゴリ選択">
      <option value="length">長さ</option>
      <option value="weight">重さ</option>
      <option value="temperature">温度</option>
      <option value="time">時間</option>
    </select>

    <label for="inputValue">入力値</label>
    <input type="number" id="inputValue" aria-label="変換する値" placeholder="値を入力してください" />

    <label for="fromUnit">変換元単位</label>
    <select id="fromUnit" aria-label="変換元単位選択"></select>

    <label for="toUnit">変換先単位</label>
    <select id="toUnit" aria-label="変換先単位選択"></select>

    <button id="convertBtn" aria-label="単位変換実行">変換する</button>

    <div id="result" aria-live="polite" aria-atomic="true"></div>
  </div>
<script>
  (function(){
    const categorySelect = document.getElementById('categorySelect');
    const inputValue = document.getElementById('inputValue');
    const fromUnit = document.getElementById('fromUnit');
    const toUnit = document.getElementById('toUnit');
    const convertBtn = document.getElementById('convertBtn');
    const resultDiv = document.getElementById('result');

    // 各カテゴリの単位リストと変換係数（基準単位はそれぞれ固定）
    const unitsData = {
      length: {
        base: 'm',
        units: {
          'm': 1,
          'km': 1000,
          'cm': 0.01,
          'mm': 0.001,
          'inch': 0.0254,
          'ft': 0.3048,
          'yd': 0.9144,
          'mile': 1609.344
        }
      },
      weight: {
        base: 'kg',
        units: {
          'kg': 1,
          'g': 0.001,
          'mg': 0.000001,
          'lb': 0.45359237,
          'oz': 0.0283495231
        }
      },
      temperature: {
        units: ['C', 'F', 'K']
      },
      time: {
        base: 's',
        units: {
          's': 1,
          'min': 60,
          'h': 3600,
          'day': 86400,
          'week': 604800
        }
      }
    };

    function populateUnits(category) {
      fromUnit.innerHTML = '';
      toUnit.innerHTML = '';

      if(category === 'temperature') {
        ['C', 'F', 'K'].forEach(u => {
          const opt1 = document.createElement('option');
          opt1.value = u;
          opt1.textContent = u;
          fromUnit.appendChild(opt1);
          const opt2 = document.createElement('option');
          opt2.value = u;
          opt2.textContent = u;
          toUnit.appendChild(opt2);
        });
      } else {
        const units = Object.keys(unitsData[category].units);
        units.forEach(u => {
          const opt1 = document.createElement('option');
          opt1.value = u;
          opt1.textContent = u;
          fromUnit.appendChild(opt1);
          const opt2 = document.createElement('option');
          opt2.value = u;
          opt2.textContent = u;
          toUnit.appendChild(opt2);
        });
      }
    }

    function convertTemperature(value, from, to) {
      if(isNaN(value)) return null;
      let celsius;

      // fromを摂氏に変換
      switch(from) {
        case 'C':
          celsius = value;
          break;
        case 'F':
          celsius = (value - 32) * 5/9;
          break;
        case 'K':
          celsius = value - 273.15;
          break;
        default:
          return null;
      }

      // 摂氏からto単位に変換
      switch(to) {
        case 'C':
          return celsius;
        case 'F':
          return (celsius * 9/5) + 32;
        case 'K':
          return celsius + 273.15;
        default:
          return null;
      }
    }

    function convertUnits(value, category, from, to) {
      if(isNaN(value)) return null;
      if(category === 'temperature') {
        return convertTemperature(value, from, to);
      } else {
        const baseValue = value * unitsData[category].units[from];
        return baseValue / unitsData[category].units[to];
      }
    }

    categorySelect.addEventListener('change', () => {
      populateUnits(categorySelect.value);
      resultDiv.textContent = '';
    });

    convertBtn.addEventListener('click', () => {
      const category = categorySelect.value;
      const value = parseFloat(inputValue.value);
      const from = fromUnit.value;
      const to = toUnit.value;

      if(isNaN(value)) {
        resultDiv.textContent = '有効な数値を入力してください';
        return;
      }
      if(!from || !to) {
        resultDiv.textContent = '単位を選択してください';
        return;
      }
      if(from === to) {
        resultDiv.textContent = '変換元と変換先は異なる単位を選択してください';
        return;
      }

      const converted = convertUnits(value, category, from, to);
      if(converted === null || isNaN(converted)) {
        resultDiv.textContent = '変換できませんでした';
        return;
      }
      resultDiv.textContent = `${value} ${from} は約 ${converted.toFixed(4)} ${to} です`;
    });

    // 初期設定
    populateUnits(categorySelect.value);
  })();
</script>
</body>
</html>

